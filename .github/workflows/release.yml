name: Deploy

on:
  release:
    types: [published]

jobs:
  deploy:
    name: Deploy (Java 8)
    runs-on: ubuntu-latest
    timeout-minutes: 30
    steps:
      - name: 📤 Checkout Repository
        uses: actions/checkout@v3

      - name: ☕ Install Java
        uses: actions/setup-java@v3
        with:
          architecture: x64
          distribution: temurin
          java-version: 8

      - name: ✔️ Package with Maven
        run: mvn package -DskipTests --no-transfer-progress

      - name: 🚀 Deploy to GitHub Releases
        uses: AButler/upload-release-assets@v2.0
        with:
          files: 'target/*.jar'
          repo-token: ${{ secrets.GITHUB_TOKEN }}